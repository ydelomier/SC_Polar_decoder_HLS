/*
 *  Adder.h
 *  SystemC_SimpleAdder
 *
 *  Created by Le Gal on 07/05/07.
 *  Copyright 2007 __MyCompanyName__. All rights reserved.
 *
 */
#ifndef _sc_encoder_
#define _sc_encoder_

#include "systemc.h"

#ifdef __RTL_SIMULATION__
#include "config.h"
#include "polar_parameters.h"
#else
#include "../../module/config.h"
#include "../../module/polar_parameters.h"
#endif


#include <iostream>
using namespace std;

SC_MODULE(sc_encoder)
{
	sc_in  <bool> clk;
	sc_in  <bool> reset;
	sc_in  <bool> enable;

	//sc_out< sc_uint<16> > cpt;

	sc_fifo_out < BIT > FB;

	sc_fifo_out< BIT > s1;
	sc_fifo_out< BIT > s2;

	SC_CTOR(sc_encoder)
	{
		SC_CTHREAD(do_fb, clk.pos());
		reset_signal_is(reset, true);

		SC_CTHREAD(do_gen, clk.pos());
		reset_signal_is(reset, true);
	}

private:

	void do_fb() // process
	{
		bool finish = false;
		wait();

		while(true){

			if(finish == false)
			{
				for(COUNTER i = 0; i < _NBITS; i++)
				{
					FB.write( (BIT) Frozen_Bits[i]);
				}
			}

			finish = true;
			wait();

		}
	}

	void do_gen() // process
	{

		const bool cw8x4[3][8] = {
				{ 0,     0,     0,     0,     1,     1,     1,     1},
				{ 0,     1,     1,     0,     1,     0,     0,     1},
				{ 0,     1,     0,     1,     1,     0,     1,     0}
		};
		const bool cw512x256[3][512] = {
				{ 0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     1,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     0,     0,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     0,     0,     1,     1,     0,     1,     0,     1,     0,     1,     1,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1,     1,     1,     1,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     1,     0,     0,     1,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     1,     0,     0,     0,     1,     1,     1,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     1,     0,     1,     0,     1,     1,     0,     1,     1,     1,     1,     0,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     0,     1,     0,     1,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     1,     0,     1,     1,     1,     1,     1,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     0,     1,     0,     0,     0,     0,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     1,     1},
				{ 1,     1,     0,     0,     1,     1,     0,     1,     1,     1,     0,     1,     0,     1,     1,     1,     1,     0,     1,     0,     0,     1,     1,     1,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     1,     1,     1,     0,     1,     0,     0,     0,     0,     1,     0,     1,     1,     0,     0,     0,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     0,     0,     1,     0,     1,     0,     1,     1,     0,     1,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     1,     0,     1,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     1,     1,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     0,     0,     0,     1,     0,     1,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     1,     0,     1,     0,     1,     1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     1,     0,     1,     1,     1,     0,     0,     0,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     0,     1,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     0,     0,     0,     0,     1,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     0,     0,     1,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     0,     1,     1,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     1,     1,     0,     1,     0,     0,     1,     0},
				{ 1,     1,     0,     1,     1,     1,     1,     1,     0,     0,     0,     1,     1,     0,     1,     1,     0,     0,     0,     1,     0,     1,     0,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     1,     0,     1,     0,     0,     1,     1,     1,     1,     1,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     1,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     1,     1,     0,     0,     0,     0,     0,     1,     0,     1,     1,     1,     1,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     0,     1,     0,     1,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     1,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     1,     0,     1,     1,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     1,     1,     1,     0,     1,     1,     1,     0,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     1,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     1,     1,     1,     1,     0,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     1,     0,     0,     1,     1,     0,     0,     0,     1,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     1,     0,     1,     0,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     0}
		};
		const bool cw1024x512[3][1024] = {
				{ 1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     1,     1,     0,     0,     1,     0,     0,     1,     0,     0,     0,     1,     1,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     0,     0,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     0,     1,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     0,     0,     0,     1,     0,     0,     0,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     1,     0,     1,     1,     1,     1,     0,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     1,     0,     1,     1,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     1,     1,     1,     0,     0,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     1,     0,     0,     1,     0,     1,     1,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     0,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     0,     1,     0,     1,     0,     1,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     0,     0,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     0,     0,     1,     1,     1,     0,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     1,     1,     0,     1,     1,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     1,     1,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     0,     1,     1,     0,     1,     1,     1,     1,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     0,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     1,     1,     0,     0,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     0,     1,     0,     0,     0,     0,     1,     0,     0,     0,     0,     1,     1,     1,     1,     0,     0,     1,     1,     0,     1,     0,     0,     0,     1,     0,     1,     1,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     0,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     0,     0,     1,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     0,     0,     1,     0,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     0,     0,     1,     1,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     1,     0,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0},
				{ 0,     0,     1,     1,     1,     1,     1,     0,     1,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     1,     0,     0,     0,     1,     0,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     1,     0,     0,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     1,     1,     0,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     0,     1,     0,     1,     0,     1,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     1,     1,     1,     1,     0,     1,     1,     1,     1,     0,     0,     0,     0,     1,     0,     0,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0,     1,     1,     1,     1,     1,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     1,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     1,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     0,     1,     0,     0,     0,     1,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     1,     1,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     0,     1,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     0,     1,     1,     0,     0,     0,     0,     0,     1,     0,     1,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     0,     0,     0,     1,     0,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     1,     1,     0,     1,     0,     0,     1,     1,     1,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     1,     0,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     0,     1,     1,     1,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     1,     1,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     0,     1,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     0,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     1,     0,     1,     0,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     1,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     1,     0,     1,     0,     1,     0,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     0,     0,     0,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     0,     1,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     0,     0,     1,     1,     1,     0,     0,     0,     1,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     0,     1,     1,     0,     1,     0,     0,     1,     0,     0,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     0,     1,     0,     0,     0,     0,     1,     1,     0,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     0,     0,     1,     0,     1,     0,     0,     1,     1,     1,     0,     1,     1,     0,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     0,     0,     0,     1,     1,     1,     0,     1,     1,     1,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     0,     0,     1,     0,     1,     1,     0,     1,     1,     0,     1,     0,     1,     0,     0,     1,     1,     1,     0,     1,     0,     1,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     1,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     0,     1,     1,     1,     0,     1,     0,     0,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     0,     1,     1,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     0,     1,     1,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     0,     0,     1,     0,     1,     0,     0,     0},
				{ 0,     1,     1,     1,     1,     0,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     1,     1,     0,     0,     1,     0,     0,     1,     0,     1,     0,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     1,     0,     0,     0,     1,     0,     1,     1,     0,     1,     1,     0,     1,     1,     0,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     0,     0,     1,     0,     1,     1,     1,     1,     1,     0,     1,     1,     1,     1,     0,     0,     1,     1,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     0,     0,     1,     1,     1,     1,     1,     1,     1,     1,     0,     1,     1,     0,     0,     1,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     1,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     1,     1,     1,     1,     0,     1,     1,     1,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     0,     1,     0,     1,     1,     1,     1,     1,     1,     1,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     1,     1,     1,     1,     0,     0,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     0,     0,     0,     1,     0,     0,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     0,     0,     1,     1,     0,     1,     1,     1,     1,     0,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     0,     0,     1,     0,     0,     0,     0,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     1,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     0,     0,     1,     1,     0,     1,     1,     0,     1,     1,     0,     1,     0,     1,     0,     1,     0,     0,     1,     1,     0,     1,     1,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     0,     1,     1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     0,     1,     0,     1,     1,     1,     1,     0,     1,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     0,     0,     1,     1,     1,     0,     0,     1,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     0,     0,     1,     0,     0,     1,     1,     1,     1,     1,     0,     0,     1,     1,     1,     1,     1,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     0,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     0,     1,     1,     0,     0,     1,     0,     0,     1,     0,     1,     1,     0,     0,     0,     1,     0,     0,     1,     1,     1,     0,     1,     0,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     0,     1,     1,     1,     1,     1,     1,     1,     0,     0,     1,     1,     0,     1,     0,     1,     1,     0,     1,     0,     0,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     0,     0,     1,     1,     0,     0,     1,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     1,     1,     1,     1,     1,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     0,     1,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     1,     1,     0,     1,     1,     1,     1,     1,     1,     1,     1,     1,     1,     0,     0,     1,     1,     0,     1,     1,     1,     1,     1,     1,     0,     0,     1,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     0,     0,     1,     0,     0,     1,     0,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     1,     1,     1,     0,     0,     1,     0,     0,     0,     0,     0,     1,     0,     0,     1,     1,     0,     0,     0,     0,     1,     0,     1,     1,     0,     1,     1,     0,     0,     0,     0,     1,     1,     1,     0,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     0,     0,     0,     1,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     0,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     0,     1,     1,     1,     1,     0,     1,     1,     1,     1,     0,     0,     1,     0,     0,     1,     0,     0,     1,     0,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     1,     1,     0,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1,     1,     0,     1,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     1,     1,     0,     1,     0,     0,     1,     1,     0,     0,     1,     0,     0,     1,     0,     1,     0,     1,     1,     1,     0,     0,     1,     1,     0,     0,     0,     1,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     1,     1,     0,     0,     1,     0,     1,     0,     0,     0,     0,     0,     1,     1,     0,     1,     1,     1,     1,     1,     1,     1,     1,     0,     1,     0,     1,     0,     1,     0,     0,     1,     1,     1,     0,     0,     0,     0,     0,     0,     0,     0,     0,     1,     1,     0,     0,     1,     1,     1,     0,     0,     0,     1,     0,     1,     1,     0,     1,     0,     0,     0,     0,     1,     0,     1,     0,     0,     0,     1,     1,     1,     1,     0,     1,     0,     0,     1,     0,     1,     1}
		};
		int cpti = 0;

		while( true )
		{
			while( enable.read() == 0 ) wait();

				bool data = 0;
				for(int j = 0; j < 3; j++){

					////////////////////////////////////
					BIT d[_NBITS];
					////////////////////////////////////

					for(int i = 0; i < _NBITS; i += 1){
					#pragma HLS PIPELINE

						switch (_NBITS ){
							case 8 		: data = cw8x4[j][i]; break;
							case 512 	: data = cw512x256[j][i]; break;
							case 1024	: data = cw1024x512[j][i]; break;
							default		: data = 0; break;
						}

						s1.write( data );
						s2.write( data );

						////////////////////////////////////
						d[i] = (sc_uint<1>) data;
						////////////////////////////////////

					}
					//cpt.write( (sc_uint<16>) cpti);
					cpti = cpti + 1;

					////////////////////////////////////
#ifdef DBG
					cout << "	[ENCODER " << name() <<" ] " ; printf("%5d ", cpti);
					cout << ", BIT in = ";
					for(int i = 0; i < _NBITS; i += 1)
						printf("%3d ", d[i].to_int());
					cout << endl;
#endif
					////////////////////////////////////
				}
			}

	//#define DDEBUGG
	#ifdef DDEBUGG
			printf("BEGIN CODED (%d)\n", _N * QC);
			for(sc_uint<10> i = 0; i < (_N * QC); i += 1){
				printf("%d ", codeword[i]);
			}
			printf("\nEND CODED\n");
	#endif

	}
};

//
//
////////////////////////////////////////////////////////////////////////////////
//
//
#endif
